\doxysection{src/naming\+\_\+server/nm\+\_\+to\+\_\+client.c File Reference}
\hypertarget{nm__to__client_8c}{}\label{nm__to__client_8c}\index{src/naming\_server/nm\_to\_client.c@{src/naming\_server/nm\_to\_client.c}}


Communication between the naming server and clients.  


{\ttfamily \#include "{}../common/headers.\+h"{}}\newline
{\ttfamily \#include "{}headers.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{nm__to__client_8c_a5dde0e64eb5cf9f811b1a6e88e1fc952}{send\+\_\+client\+\_\+port}} (const i32 clientfd, const enum operation op)
\begin{DoxyCompactList}\small\item\em Receive path from client and send the corresponding storage server\textquotesingle{}s port. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{nm__to__client_8c_ab0ea7ac064d36b582ffb0ff0a8d77fab}{create\+\_\+operations}} (const i32 clientfd, const enum operation op)
\begin{DoxyCompactList}\small\item\em Receive path from client, perform create operation on storage server and send the status code. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{nm__to__client_8c_a7de4d85c596e67cbb430624921edbba2}{delete\+\_\+operations}} (const i32 clientfd, const enum operation op)
\begin{DoxyCompactList}\small\item\em receive path from client, perform delete operation on storage server and send the status code \end{DoxyCompactList}\item 
void \mbox{\hyperlink{nm__to__client_8c_afeab2088d4bdf9e891d760683885e7d3}{copy\+\_\+file\+\_\+or\+\_\+folder}} (\mbox{\hyperlink{structTreeNode}{Tree}} Copy\+Tree, const char \texorpdfstring{$\ast$}{*}from\+\_\+path, const char \texorpdfstring{$\ast$}{*}dest\+\_\+path, const i32 from\+\_\+sockfd, const i32 to\+\_\+sockfd, const i32 to\+\_\+port, char \texorpdfstring{$\ast$}{*}UUID)
\begin{DoxyCompactList}\small\item\em Copy a file or folder across different storage servers or same storage servers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{nm__to__client_8c_aa26a9f48cd86c8f44ee0463928270fde}{copy\+\_\+operation}} (const i32 clientfd, const enum operation op)
\begin{DoxyCompactList}\small\item\em Receive 2 paths from client, perform copy operation on storage server and send the status code. \end{DoxyCompactList}\item 
\Hypertarget{nm__to__client_8c_a22d67638712030ce0cbe360c1a85217d}\label{nm__to__client_8c_a22d67638712030ce0cbe360c1a85217d} 
void {\bfseries send\+\_\+tree\+\_\+for\+\_\+printing} (const i32 clientfd)
\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{nm__to__client_8c_a019701a41a93cf6168617a8d82ae3f90}{client\+\_\+init}} (void \texorpdfstring{$\ast$}{*}arg)
\begin{DoxyCompactList}\small\item\em Initializes connection to the clients and spawns a new client relay for each of them. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{nm__to__client_8c_ad8013e51b64d4bb64ce25cf288d82f31}{client\+\_\+relay}} (void \texorpdfstring{$\ast$}{*}arg)
\begin{DoxyCompactList}\small\item\em Receives all operations from the client. In case of READ, WRITE and METADATA, sends the port number of the corresponding storage server to the client. In other cases, performs the operation and sends the status code to the client. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Communication between the naming server and clients. 


\begin{DoxyItemize}
\item Receives initial client connections and spawns a new thread for each client
\item Handles all operations sent to the naming server from the client
\item Forwards requests to the storage server whenever needed 
\end{DoxyItemize}

\doxysubsection{Function Documentation}
\Hypertarget{nm__to__client_8c_a019701a41a93cf6168617a8d82ae3f90}\label{nm__to__client_8c_a019701a41a93cf6168617a8d82ae3f90} 
\index{nm\_to\_client.c@{nm\_to\_client.c}!client\_init@{client\_init}}
\index{client\_init@{client\_init}!nm\_to\_client.c@{nm\_to\_client.c}}
\doxysubsubsection{\texorpdfstring{client\_init()}{client\_init()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} client\+\_\+init (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{arg }\end{DoxyParamCaption})}



Initializes connection to the clients and spawns a new client relay for each of them. 


\begin{DoxyParams}{Parameters}
{\em arg} & NULL \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void\texorpdfstring{$\ast$}{*} NULL 
\end{DoxyReturn}
\Hypertarget{nm__to__client_8c_ad8013e51b64d4bb64ce25cf288d82f31}\label{nm__to__client_8c_ad8013e51b64d4bb64ce25cf288d82f31} 
\index{nm\_to\_client.c@{nm\_to\_client.c}!client\_relay@{client\_relay}}
\index{client\_relay@{client\_relay}!nm\_to\_client.c@{nm\_to\_client.c}}
\doxysubsubsection{\texorpdfstring{client\_relay()}{client\_relay()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} client\+\_\+relay (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{arg }\end{DoxyParamCaption})}



Receives all operations from the client. In case of READ, WRITE and METADATA, sends the port number of the corresponding storage server to the client. In other cases, performs the operation and sends the status code to the client. 


\begin{DoxyParams}{Parameters}
{\em arg} & integer pointer to the client file descriptor \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void\texorpdfstring{$\ast$}{*} NULL 
\end{DoxyReturn}
\Hypertarget{nm__to__client_8c_afeab2088d4bdf9e891d760683885e7d3}\label{nm__to__client_8c_afeab2088d4bdf9e891d760683885e7d3} 
\index{nm\_to\_client.c@{nm\_to\_client.c}!copy\_file\_or\_folder@{copy\_file\_or\_folder}}
\index{copy\_file\_or\_folder@{copy\_file\_or\_folder}!nm\_to\_client.c@{nm\_to\_client.c}}
\doxysubsubsection{\texorpdfstring{copy\_file\_or\_folder()}{copy\_file\_or\_folder()}}
{\footnotesize\ttfamily void copy\+\_\+file\+\_\+or\+\_\+folder (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structTreeNode}{Tree}}}]{Copy\+Tree,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{from\+\_\+path,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{dest\+\_\+path,  }\item[{const i32}]{from\+\_\+sockfd,  }\item[{const i32}]{to\+\_\+sockfd,  }\item[{const i32}]{to\+\_\+port,  }\item[{char \texorpdfstring{$\ast$}{*}}]{UUID }\end{DoxyParamCaption})}



Copy a file or folder across different storage servers or same storage servers. 


\begin{DoxyParams}{Parameters}
{\em Copy\+Tree} & The tree being copied from \\
\hline
{\em from\+\_\+path} & current file/folder path being copied \\
\hline
{\em dest\+\_\+path} & destination path \\
\hline
{\em from\+\_\+sockfd} & socket of the storage server being copied from \\
\hline
{\em to\+\_\+sockfd} & socket of the storage server being copied to \\
\hline
{\em to\+\_\+port} & nm port for the {\ttfamily to} storage server \\
\hline
{\em UUID} & unique identifier of the {\ttfamily to} storage server \\
\hline
\end{DoxyParams}
\Hypertarget{nm__to__client_8c_aa26a9f48cd86c8f44ee0463928270fde}\label{nm__to__client_8c_aa26a9f48cd86c8f44ee0463928270fde} 
\index{nm\_to\_client.c@{nm\_to\_client.c}!copy\_operation@{copy\_operation}}
\index{copy\_operation@{copy\_operation}!nm\_to\_client.c@{nm\_to\_client.c}}
\doxysubsubsection{\texorpdfstring{copy\_operation()}{copy\_operation()}}
{\footnotesize\ttfamily void copy\+\_\+operation (\begin{DoxyParamCaption}\item[{const i32}]{clientfd,  }\item[{const enum operation}]{op }\end{DoxyParamCaption})}



Receive 2 paths from client, perform copy operation on storage server and send the status code. 


\begin{DoxyParams}{Parameters}
{\em clientfd} & file descriptor of the client socket \\
\hline
{\em op} & specified operation \\
\hline
\end{DoxyParams}
\Hypertarget{nm__to__client_8c_ab0ea7ac064d36b582ffb0ff0a8d77fab}\label{nm__to__client_8c_ab0ea7ac064d36b582ffb0ff0a8d77fab} 
\index{nm\_to\_client.c@{nm\_to\_client.c}!create\_operations@{create\_operations}}
\index{create\_operations@{create\_operations}!nm\_to\_client.c@{nm\_to\_client.c}}
\doxysubsubsection{\texorpdfstring{create\_operations()}{create\_operations()}}
{\footnotesize\ttfamily void create\+\_\+operations (\begin{DoxyParamCaption}\item[{const i32}]{clientfd,  }\item[{const enum operation}]{op }\end{DoxyParamCaption})}



Receive path from client, perform create operation on storage server and send the status code. 


\begin{DoxyParams}{Parameters}
{\em clientfd} & file descriptor of the client socket \\
\hline
{\em op} & specified operation \\
\hline
\end{DoxyParams}
\Hypertarget{nm__to__client_8c_a7de4d85c596e67cbb430624921edbba2}\label{nm__to__client_8c_a7de4d85c596e67cbb430624921edbba2} 
\index{nm\_to\_client.c@{nm\_to\_client.c}!delete\_operations@{delete\_operations}}
\index{delete\_operations@{delete\_operations}!nm\_to\_client.c@{nm\_to\_client.c}}
\doxysubsubsection{\texorpdfstring{delete\_operations()}{delete\_operations()}}
{\footnotesize\ttfamily void delete\+\_\+operations (\begin{DoxyParamCaption}\item[{const i32}]{clientfd,  }\item[{const enum operation}]{op }\end{DoxyParamCaption})}



receive path from client, perform delete operation on storage server and send the status code 


\begin{DoxyParams}{Parameters}
{\em clientfd} & file descriptor of the client socket \\
\hline
{\em op} & specified operation \\
\hline
\end{DoxyParams}
\Hypertarget{nm__to__client_8c_a5dde0e64eb5cf9f811b1a6e88e1fc952}\label{nm__to__client_8c_a5dde0e64eb5cf9f811b1a6e88e1fc952} 
\index{nm\_to\_client.c@{nm\_to\_client.c}!send\_client\_port@{send\_client\_port}}
\index{send\_client\_port@{send\_client\_port}!nm\_to\_client.c@{nm\_to\_client.c}}
\doxysubsubsection{\texorpdfstring{send\_client\_port()}{send\_client\_port()}}
{\footnotesize\ttfamily void send\+\_\+client\+\_\+port (\begin{DoxyParamCaption}\item[{const i32}]{clientfd,  }\item[{const enum operation}]{op }\end{DoxyParamCaption})}



Receive path from client and send the corresponding storage server\textquotesingle{}s port. 


\begin{DoxyParams}{Parameters}
{\em clientfd} & file descriptor of the client socket \\
\hline
\end{DoxyParams}
